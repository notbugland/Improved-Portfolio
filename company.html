<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Bugland's Project Gallery" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <script
      src="https://kit.fontawesome.com/fa62c117c7.js"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="styles.css" />
    <link rel="icon" href="images/chickensmoking.png" />
    <title>Bugland's Project Gallery</title>
    <style>
      .project-gallery {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 1em;
        padding: 2em;
      }

      .project-category {
        width: 100%;
        margin-bottom: 2em;
      }

      .project-category h2 {
        text-align: center;
        margin-bottom: 1em;
        cursor: pointer;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .project-category h2 i {
        margin-left: 0.5em;
        transition: transform 0.3s ease;
      }

      .project-category h2.active i {
        transform: rotate(180deg);
      }

      .project-images {
        display: none;
        flex-wrap: wrap;
        justify-content: center;
        gap: 1em;
      }

      .project-images.active {
        display: flex;
      }

      .project-image {
        max-width: 250px;
        max-height: 250px;
        object-fit: cover;
        box-shadow: var(--shadow);
        transition: transform 0.2s ease;
        cursor: pointer;
      }

      .project-image:hover {
        transform: scale(1.05);
      }

      /* Lightbox styles */
      #lightbox {
        display: none;
        position: fixed;
        z-index: 1000;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.9);
        justify-content: center;
        align-items: center;
      }

      #lightbox-content {
        max-width: 90%;
        max-height: 90%;
        display: flex;
        justify-content: center;
        align-items: center;
        position: relative;
      }

      #lightbox-img,
      #lightbox-video {
        max-width: 100%;
        max-height: 90vh;
        object-fit: contain;
      }

      .lightbox-nav {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        color: white;
        font-size: 2rem;
        cursor: pointer;
        background-color: rgba(0, 0, 0, 0.5);
        padding: 10px;
      }

      .lightbox-prev {
        left: 10px;
      }

      .lightbox-next {
        right: 10px;
      }

      .lightbox-close {
        position: absolute;
        top: 10px;
        right: 10px;
        color: white;
        font-size: 2rem;
        cursor: pointer;
      }
    </style>
  </head>
  <body class="light" id="top">
    <header class="header center">
      <h3>
        <a href="index.html" class="link">BS.</a>
      </h3>

      <nav class="nav center">
        <ul class="nav__list center">
          <li class="nav__list-item">
            <a class="link link--nav" href="index.html#projects">Projects</a>
          </li>
          <li class="nav__list-item">
            <a class="link link--nav" href="index.html#skills">Skills</a>
          </li>
          <li class="nav__list-item">
            <a class="link link--nav" href="index.html#contact">Contact</a>
          </li>
        </ul>

        <button type="button" aria-label="toggle theme" class="btn btn--icon">
          <i aria-hidden="true" id="btn-theme" class="fas fa-moon"></i>
        </button>

        <button
          type="button"
          aria-label="toggle navigation"
          class="btn btn--icon nav__hamburger"
        >
          <i aria-hidden="true" class="fas fa-bars"></i>
        </button>
      </nav>
    </header>

    <main>
      <section class="section project-gallery">
        <div class="project-category">
          <h2 class="section__title">
            Models
            <i class="fas fa-chevron-down"></i>
          </h2>
          <div class="project-images">
            <!-- Replace these with your actual project images -->
            <img
              src="images/chickensmoking.png"
              alt="Character Model 1"
              class="project-image"
              data-type="image"
            />
            <img
              src="images/discord.png"
              alt="Character Model 2"
              class="project-image"
              data-type="image"
            />
            <img
              src="images/O2Tanks.png"
              alt="Character Model 3"
              class="project-image"
              data-type="image"
            />
          </div>
        </div>

        <div class="project-category">
          <h2 class="section__title">
            Animations
            <i class="fas fa-chevron-down"></i>
          </h2>
          <div class="project-images">
            <img
              src="/api/placeholder/300/300"
              alt="Environment Model 1"
              class="project-image"
              data-type="image"
            />
            <img
              src="/api/placeholder/300/300"
              alt="Environment Model 2"
              class="project-image"
              data-type="image"
            />
            <img
              src="/api/placeholder/300/300"
              alt="Environment Model 3"
              class="project-image"
              data-type="image"
            />
          </div>
        </div>

        <div class="project-category">
          <h2 class="section__title">
            Misc.
            <i class="fas fa-chevron-down"></i>
          </h2>
          <div class="project-images">
            <video class="project-image" data-type="video">
              <source src="/api/placeholder/300/300" type="video/mp4" />
              Your browser does not support the video tag.
            </video>
            <video class="project-image" data-type="video">
              <source src="/api/placeholder/300/300" type="video/mp4" />
              Your browser does not support the video tag.
            </video>
            <video class="project-image" data-type="video">
              <source src="/api/placeholder/300/300" type="video/mp4" />
              Your browser does not support the video tag.
            </video>
          </div>
        </div>
      </section>

      <!-- Lightbox -->
      <div id="lightbox">
        <div class="lightbox-close">&times;</div>
        <div class="lightbox-nav lightbox-prev">&lt;</div>
        <div class="lightbox-nav lightbox-next">&gt;</div>
        <div id="lightbox-content">
          <img id="lightbox-img" src="" alt="Lightbox image" />
          <video id="lightbox-video" controls>
            <source id="lightbox-video-source" src="" type="video/mp4" />
            Your browser does not support the video tag.
          </video>
        </div>
      </div>
    </main>

    <footer class="footer">
      <a
        target="_blank"
        href="https://github.com/imaaronlam"
        class="link footer__link"
      >
        Alternate GitHub
      </a>
    </footer>

    <div class="scroll-container">
      <div class="scroll-top">
        <a aria-label="Scroll up" href="#top">
          <i aria-hidden="true" class="fas fa-arrow-up"></i>
        </a>
      </div>
    </div>

    <script src="./script.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const projectCategories = document.querySelectorAll(
          ".project-category h2"
        );
        const projectImages = document.querySelectorAll(".project-image");
        const lightbox = document.getElementById("lightbox");
        const lightboxImg = document.getElementById("lightbox-img");
        const lightboxVideo = document.getElementById("lightbox-video");
        const lightboxVideoSource = document.getElementById(
          "lightbox-video-source"
        );
        const lightboxClose = document.querySelector(".lightbox-close");
        const lightboxPrev = document.querySelector(".lightbox-prev");
        const lightboxNext = document.querySelector(".lightbox-next");

        let currentGallery = [];
        let currentIndex = 0;

        // Category dropdown functionality
        projectCategories.forEach((category) => {
          category.addEventListener("click", () => {
            category.classList.toggle("active");
            const projectImages = category.nextElementSibling;
            projectImages.classList.toggle("active");
          });
        });

        // Lightbox functionality
        function openLightbox(img, gallery) {
          currentGallery = Array.from(gallery);
          currentIndex = currentGallery.indexOf(img);

          if (img.dataset.type === "image") {
            lightboxImg.src = img.src;
            lightboxImg.alt = img.alt;
            lightboxImg.style.display = "block";
            lightboxVideo.style.display = "none";
          } else {
            lightboxVideoSource.src = img.querySelector("source").src;
            lightboxVideo.load();
            lightboxImg.style.display = "none";
            lightboxVideo.style.display = "block";
          }

          lightbox.style.display = "flex";
        }

        function closeLightbox() {
          lightbox.style.display = "none";
          lightboxVideo.pause();
        }

        function navigateLightbox(direction) {
          currentIndex += direction;

          // Wrap around the gallery
          if (currentIndex >= currentGallery.length) {
            currentIndex = 0;
          } else if (currentIndex < 0) {
            currentIndex = currentGallery.length - 1;
          }

          const nextItem = currentGallery[currentIndex];
          openLightbox(nextItem, currentGallery);
        }

        // Add click events to images
        projectImages.forEach((img) => {
          img.addEventListener("click", (e) => {
            const gallery = e.target
              .closest(".project-images")
              .querySelectorAll(".project-image");
            openLightbox(e.target, gallery);
          });
        });

        // Lightbox navigation events
        lightboxClose.addEventListener("click", closeLightbox);
        lightboxPrev.addEventListener("click", () => navigateLightbox(-1));
        lightboxNext.addEventListener("click", () => navigateLightbox(1));

        // Close lightbox when clicking outside the image
        lightbox.addEventListener("click", (e) => {
          if (e.target === lightbox) {
            closeLightbox();
          }
        });

        // Close lightbox with Escape key
        document.addEventListener("keydown", (e) => {
          if (e.key === "Escape" && lightbox.style.display === "flex") {
            closeLightbox();
          }

          // Navigate with arrow keys
          if (lightbox.style.display === "flex") {
            if (e.key === "ArrowLeft") {
              navigateLightbox(-1);
            } else if (e.key === "ArrowRight") {
              navigateLightbox(1);
            }
          }
        });
      });
    </script>
  </body>
</html>
